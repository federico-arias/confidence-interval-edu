<!doctype html>
<html>
<head>
<meta charset='utf-8' />
<style>
body.cursor {
    cursor:ew-resize;
}
html, 
body{
           height:100%;
}
#control {
   cursor:ew-resize;
   -moz-user-select:none;
}
</style>
</head>
<body lang='en'>
<div id='control' style='width:55px;margin:20px 0 0 200px'>0</div>
<script type='text/javascript'>

var Control = function (elem, min, max, initialValue) {
    var r = elem.getBoundingClientRect();
    this.elem = elem;
    this.onchange = function(){};
    this.range = {};
    this.range.min = min;
    this.range.max = max;
    this.elemCenter = {};
    this.elemCenter.x = r.left + r.width / 2;
    //this.elemCenter.y = r.top + r.height/ 2;
    this.isPressed = false;
    this.mouse = {};
    this.domain;
    this.value = initialValue;
    this.elem.addEventListener('mousedown', this.init.bind(this), false);
};

Control.prototype.init = function (e) {
    if (!this.isPressed) {
        var browserW = Math.max(document.documentElement.clientWidth, window.innerWidth || 0);
        var rightOffset = browserW - this.elemCenter.x;
        this.domain = rightOffset > this.elemCenter.x ?
            rightOffset
            :this.elemCenter.x; 
        this.mouse.initX = e.clientX;
        this.mouse.initY = e.clientY;
        this.isPressed = true;
        document.addEventListener('mousemove', this.mousemove.bind(this), false);
        document.addEventListener('mouseup', this.release.bind(this), false);
        document.body.className = 'cursor';
    }
};

Control.prototype.release = function(e) {
    this.isPressed = false;
    document.removeEventListener('mousemove', this.mousemove, false);
    document.removeEventListener('mouseup', this.release, false);
    document.body.className = '';
    this.onchange(this.value);
};

Control.prototype.mousemove = function(e) {
    if (this.isPressed) {
    var d = Math.abs(this.mouse.initX - e.clientX);
    this.value = this.scale(d) > this.range.max ?
        this.range.max
        :parseInt(this.scale(d));
    this.elem.textContent = this.value;
    }
};

Control.prototype.scale = function(diff) {
    return (this.range.max - this.range.min) * (diff/this.domain) + this.range.min;
};

//module.exports = Control;

var domControl = document.getElementById('control');
var testControl = new Control(domControl, 5, 10, 0);
</script>
</body>
</html>
